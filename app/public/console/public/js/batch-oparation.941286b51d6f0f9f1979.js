(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{434:function(e,t,i){"use strict";i.r(t),i.d(t,"RESOURCE_TYPES",function(){return n}),i.d(t,"RESOURCE_STATUS_MAP",function(){return r}),i.d(t,"RESOURCE_STATUS",function(){return o});var s=i(1),n={json:"json",widget:"widget",image:"image",audio:"audio",markdown:"markdown",page_build:"page_build",reveal_slide:"reveal_slide",license:"license",video:"video",catalog:"catalog"},r={unknown:0,unpublished:1,published:2,freeze:3},o=[{desc:s.a.t("config.resource.states[0]"),type:"danger",status:r.unknown},{desc:s.a.t("config.resource.states[1]"),type:"warning",status:r.unpublished},{desc:s.a.t("config.resource.states[2]"),type:"success",status:r.published},{desc:s.a.t("config.resource.states[3]"),type:"danger",status:r.freeze}]},696:function(e,t,i){},697:function(e,t,i){},926:function(e,t,i){"use strict";var s=i(696);i.n(s).a},927:function(e,t,i){"use strict";var s=i(697);i.n(s).a},964:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"f-operation"}},[i("div",{staticClass:"fo-main-content"},[i("el-steps",{staticStyle:{"margin-bottom":"50px"},attrs:{active:e.activeIndex,"finish-status":"finish",simple:""}},e._l(e.stepList,function(t,s){return i("el-step",{key:"step"+s,staticClass:"fo-step-item",attrs:{icon:t.icon}},[i("div",{attrs:{slot:"title"},on:{click:function(i){return e.tapStep(t,s)}},slot:"title"},[e._v(e._s(t.title))])])}),1),e._v(" "),i("router-view")],1)])};s._withStripped=!0;var n=i(434),r={name:"batch-operation",data:function(){return{selectType:"",fileList:[],existedFilesSet:new Set,errorFilesSet:new Set,uploadData:{resourceType:""},stepList:[{title:"创建资源",icon:"el-icon-edit",path:"/tools/batch-operation/create-resource"},{title:"资源列表",icon:"el-icon-upload",path:"/tools/batch-operation/resources-list"},{title:"发行列表",icon:"el-icon-picture",path:"/tools/batch-operation/releases-list"},{title:"节点发行列表",icon:"el-icon-files",path:"/tools/batch-operation/presentables-list"}],activeIndex:0}},computed:{uploadActionUrl:function(){return"".concat(window.window.FreelogApp.Env.qiOrigin,"/v1/resources/temporaryFiles/uploadResourceFile")},resourceTypes:function(){return Object.values(n.RESOURCE_TYPES)},stepPaths:function(){return this.stepList.map(function(e){return e.path})}},watch:{selectType:function(){this.uploadData.resourceType=this.selectType}},mounted:function(){this.activeIndex=this.stepPaths.indexOf(this.$route.path)},methods:{tapStep:function(e,t){this.$router.push(e.path),this.activeStep=t},fileChangeHandler:function(e,t){this.fileList=t},fileSuccessHandler:function(e,t,i){var s=this,n=t.name,r=e.errcode,o=e.data,a=e.msg;if(0===r){var c=o.uploadFileId;o.isExistResource?(this.$message.warning("“".concat(n,"”已存在！")),this.existedFilesSet.add(n)):this.$services.resource.post({uploadFileId:c,aliasName:n,description:"",dependencies:[]}).then(function(e){return e.data}).then(function(e){0===e.errcode?s.$message.success("“".concat(n,"创建成功！")):(s.$message.error("“".concat(n,"”:").concat(e.msg)),s.errorFilesSet.add(n),s.fileList=i.map(function(e){var t=e.name;return s.errorFilesSet.has(t)&&(e.name="".concat(t," (出错喇！！！)")),e}))})}else this.$message.error("".concat(n,": ").concat(a)),this.errorFilesSet.add(n);this.fileList=i.map(function(e){var t=e.name;return s.existedFilesSet.has(t)&&(e.name="".concat(t," (已存在！！！)")),e})},fileErrorHandler:function(e,t,i){var s=this;this.errorFilesSet.add(t.name),this.fileList=i.map(function(e){var i=e.name;return s.errorFilesSet.has(i)&&(t.name="".concat(i," (出错喇！！！)")),e})},createResources:function(){var e=this,t=this.selectType;if(""!==t)return 0===this.fileList.length?(console.log(JSON.parse(JSON.stringify(this.fileList))),void this.$message.error("请先添加文件")):void this.$confirm("资源类型为".concat(t,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$refs.foUpload.submit()});this.$message.error("请先选择资源类型！！！")},clearFileList:function(){this.$refs.foUpload.clearFiles(),this.fileList=[]}}},o=(i(926),i(927),i(3)),a=Object(o.a)(r,s,[],!1,null,"61940e94",null);a.options.__file="src/views/tools/batch-operation.vue";t.default=a.exports}}]);