(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{430:function(e,t,a){},443:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"listView",staticClass:"fl-lazy-list-view"},[e.previewList.length?a("ul",{style:{paddingTop:e.lineTopHeight+"px",paddingBottom:e.lineBottomHeight+"px"}},[e._l(e.previewList,function(t,r){return a("li",{key:r,staticClass:"show-up",class:[e.itemClass]},[e._t("default",null,{data:t})],2)}),e._v(" "),e._t("append")],2):e._e(),e._v(" "),e.isLoading||0!==e.previewList.length?e._e():e._t("empty",[a("div",{staticStyle:{"font-size":"20px","text-align":"center"}},[e._v(e._s(e.$t("components.lazyListView.noContentTip")))])]),e._v(" "),e._t("loading",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading>0,expression:"isLoading > 0"}],ref:"loading",staticClass:"load-more-gif",attrs:{"element-loading-text":e.$t("components.lazyListView.loadingTip"),"element-loading-background":"rgba(0,0,0,0)"}})])],2)};r._withStripped=!0;var s=a(444),i=a.n(s),n=window.innerHeight||document.documentElement.clientHeight;function o(e,t){var a,r,s,i=e.getBoundingClientRect(),o={top:0,left:0,bottom:n,right:window.innerWidth||document.documentElement.clientWidth};return t&&(o.top-=t.top||0,o.left-=t.left||0,o.bottom+=t.bottom||0,o.right+=t.right||0),a=i,r=o,(s={}).top=Math.max(a.top,r.top),s.bottom=Math.min(a.bottom,r.bottom),s.left=Math.max(a.left,r.left),s.right=Math.min(a.right,r.right),s.bottom>=s.top&&s.right>=s.left}var c={name:"fl-lazy-list-view",props:{list:{type:Array,required:!0,default:[],twoWays:!0},itemClass:{type:String,default:""},fetch:{type:Function}},data:function(){return{lastScrollTop:null,lineTopHeight:0,lineBottomHeight:0,previewList:[],displayCount:0,canLoadMore:!0,index:1,isLoading:0}},mounted:function(){this.initView(),this.$on("reload",this.refresh.bind(this))},beforeDestroy:function(){this.disconnect()},methods:{initView:function(){var e=this,t=this.$refs.loading,a=parseInt(n,10);this.reset();var r=function(){t.classList.add("hide")};this.observer=i()(t,{loaded:function(s){if(!1===e.canLoadMore)return r();var i=o(t,{bottom:a}),n=function(){e.isLoading+=1,e.load().then(function(){e.isLoading-=1,!1===e.canLoadMore?r():(s.dataset.loaded=!1,e.observer.observe(s))}).catch(function(t){console.log(t),e.isLoading-=1,r()})};i?n():e.canLoadMore&&e.index<2&&n()},rootMargin:"".concat(a,"px ").concat(a,"px"),threshold:.1}),this.observer.observe()},load:function(){var e=this,t=e.index;return e.index+=1,e.fetch(t).then(function(t){if(e.canLoadMore=t.canLoadMore,e.scrollHandler(t.dataList||[]),!1===e.canLoadMore)return Promise.reject()})},disconnect:function(){var e=this.observer&&this.observer.observer;e&&e.disconnect&&e.disconnect()},reset:function(){var e=this.$refs.loading;this.canLoadMore=!0,this.previewList=[],this.index=1,this.isLoading=0,e.classList.remove("hide"),e.dataset.loaded=!1},refresh:function(){var e=this.$refs.loading;this.reset(),this.observer.observe(e),this.observer.triggerLoad(e)},scrollHandler:function(e){this.previewList=this.previewList.concat(e)}},components:{}},l=(a(445),a(3)),u=Object(l.a)(c,r,[],!1,null,"f929dc2c",null);u.options.__file="src/components/LazyListView/index.vue";t.a=u.exports},444:function(e,t,a){
/*! lozad.js - v1.9.0 - 2019-02-09
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2019 Apoorv Saxena; Licensed MIT */
e.exports=function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},t="undefined"!=typeof document&&document.documentMode,a={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var a=document.createElement("img");t&&e.getAttribute("data-iesrc")&&(a.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(a.alt=e.getAttribute("data-alt")),e.appendChild(a)}if("video"===e.nodeName.toLowerCase()&&!e.getAttribute("data-src")&&e.children){for(var r=e.children,s=void 0,i=0;i<=r.length-1;i++)(s=r[i].getAttribute("data-src"))&&(r[i].src=s);e.load()}e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),e.getAttribute("data-background-image")&&(e.style.backgroundImage="url('"+e.getAttribute("data-background-image")+"')"),e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}};function r(e){e.setAttribute("data-loaded",!0)}var s=function(e){return"true"===e.getAttribute("data-loaded")};return function(){var t,i,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=e({},a,o),l=c.root,u=c.rootMargin,d=c.threshold,h=c.load,p=c.loaded,f=void 0;return window.IntersectionObserver&&(f=new IntersectionObserver((t=h,i=p,function(e,a){e.forEach(function(e){(0<e.intersectionRatio||e.isIntersecting)&&(a.unobserve(e.target),s(e.target)||(t(e.target),r(e.target),i(e.target)))})}),{root:l,rootMargin:u,threshold:d})),{observe:function(){for(var e=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)}(n,l),t=0;t<e.length;t++)s(e[t])||(f?f.observe(e[t]):(h(e[t]),r(e[t]),p(e[t])))},triggerLoad:function(e){s(e)||(h(e),r(e),p(e))},observer:f}}}()},445:function(e,t,a){"use strict";var r=a(430);a.n(r).a},486:function(e,t,a){},673:function(e,t,a){"use strict";var r=a(486);a.n(r).a},693:function(e,t,a){},694:function(e,t,a){},695:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"createBtnText":"创建发行","dialogTitle":"我的资源","goToMarket":"前往发行市场","list":{"name":"发行名称","type":"发行类型","newVersion":"最新版本","allTypes":"全部类型","policy":"策略","policyCount":["等","个策略..."],"noPolicies":"no policies","view":"查看","updateDate":"更新时间","collectDate":"收藏时间","createDate":"创建时间","operate":"操作","editBtnText":"编辑","cancelCollectionBtnText":"取消收藏","tips":["策略已下架"],"messages":["没有符合条件的发行","您还没有创建任何发行。","您还没有收藏任何发行。您在发行市场收藏的发行之后将会出现在这里。","取消成功！"],"status":["全部","已上线","未上线"],"statusText":"状态"}},"en":{"createBtnText":"Create Release","dialogTitle":"My Resources","goToMarket":"Go to market","list":{"name":"Release name","type":"Release type","newVersion":"New version","allTypes":"All types","policy":"Policy","policyCount":["There are "," policies..."],"noPolicies":"No policies","view":"view","updateDate":"Update date","collectDate":"Collect Date","createDate":"Create date","operate":"Operate","editBtnText":"Edit","cancelCollectionBtnText":"cancel collection","tips":["All policies has been off the shelves"],"messages":["There are no releases available","You have not created any releases.","You haven\'t collected any releases yet. You will appear here after the release of your collection in the release market.","Cancel Successful！"],"status":["All","online","offline"],"statusText":"State"}}}'),delete e.options._Ctor}},720:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{ref:"searchInputRef",staticClass:"r-e-w-search-input",attrs:{clearable:"",placeholder:e.$t("search.resourcePlaceholder")},on:{clear:e.clearSearchInputHandler},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchHandler(t)}},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),a("lazy-list-view",{ref:"searchView",staticClass:"r-e-w-s-resource-list",attrs:{list:e.searchResources,height:60,fetch:e.searchDataHandler},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"r-e-w-s-r-item"},[a("span",{staticClass:"r-e-w-s-r-name"},[e._v(e._s(t.data.aliasName))]),e._v(" "),a("span",{staticClass:"r-e-w-s-r-type"},[e._v(e._s(e._f("pageBuildFilter")(t.data.resourceType)))]),e._v(" "),a("span",{staticClass:"r-e-w-s-r-date"},[e._v(e._s(e._f("fmtDate")(t.data.createDate)))]),e._v(" "),e.resourceMapReleases[t.data.resourceId]?a("span",{staticClass:"r-e-w-s-r-relase"},[e._v("已有发行")]):e._e(),e._v(" "),a("span",{staticClass:"r-e-w-s-r-select-btn",on:{click:function(a){return e.selectResource(t.data)}}},[e._v("选择")])])]}}])})],1)};r._withStripped=!0;var s={name:"resource-search",components:{LazyListView:a(443).a},data:function(){return{searchInput:"",searchResources:[],isFirstSearch:!0,resourceMapReleases:{}}},computed:{resourceProjection:function(){return["resourceId","resourceType","aliasName","createDate","status"].join(",")}},methods:{clearSearchInputHandler:function(){},searchHandler:function(){this.searchResources=[],this.$refs.searchView.refresh(),console.log(this.resourceMapReleases)},searchDataHandler:function(e){var t=this;return this.$services.ResourceService.get({params:Object.assign({keywords:encodeURIComponent(this.searchInput),page:e,pageSize:10,isSelf:1,projection:this.resourceProjection},this.searchScope)}).then(function(e){var a=e.getData()||{};0===e.data.errcode?(t.searchResources=t.searchResources.concat(a.dataList),a.dataList.length<10&&(a.canLoadMore=!1)):a.canLoadMore=!1;var r=a.dataList.map(function(e){return e.resourceId});return t.batchFetchReleaseList(r),a})},selectResource:function(e){this.$emit("select-resource",e)},batchFetchReleaseList:function(e){var t=this;return e=e.filter(function(e){return!t.resourceMapReleases[e.resourceId]}).join(","),this.$services.ResourceService.get("releases?resourceIds=".concat(e)).then(function(e){return e.data}).then(function(e){if(0===e.errcode){for(var a=e.data.length,r={},s=0;s<a;s++){r[e.data[s].resourceId]=e.data[s].releases.length>0}t.resourceMapReleases=Object.assign({},t.resourceMapReleases,r)}})}}},i=(a(673),a(3)),n=Object(i.a)(s,r,[],!1,null,"505db748",null);n.options.__file="src/views/resource/search/search.vue";t.a=n.exports},926:function(e,t,a){"use strict";var r=a(693);a.n(r).a},927:function(e,t,a){"use strict";var r=a(694);a.n(r).a},928:function(e,t,a){"use strict";var r=a(695),s=a.n(r);t.default=s.a},975:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"my-releases"},[a("div",{staticClass:"m-r-header clearfix"},[a("div",{staticClass:"right-tool-bar-wrap"},[a("search-input",{attrs:{showInputImmediately:""},on:{search:e.searchHandler}})],1),e._v(" "),a("el-button",{staticClass:"m-r-create-btn",attrs:{size:"medium",type:"primary"},on:{click:function(t){e.resourceDialogVisible=!0}}},[e._v(e._s(e.$t("createBtnText")))])],1),e._v(" "),a("release-items-list",{attrs:{type:"myReleases",query:e.queryInput}}),e._v(" "),a("el-dialog",{staticClass:"my-r-search-dialog",attrs:{center:"",title:e.$t("dialogTitle"),width:"640px",visible:e.resourceDialogVisible},on:{"update:visible":function(t){e.resourceDialogVisible=t}}},[a("resource-search",{on:{"select-resource":e.createNewRelease}})],1)],1)};r._withStripped=!0;var s=a(720),i=a(465),n={name:"release-list",data:function(){return{resourceList:[],curTabName:"self",queryInput:"",resourceDialogVisible:!1}},components:{ReleaseItemsList:a(754).a,SearchInput:i.a,ResourceSearch:s.a},methods:{searchHandler:function(e){this.queryInput=e},createNewRelease:function(e){this.$router.push("/release/create?resourceId=".concat(e.resourceId))}},mounted:function(){}},o=(a(926),a(927),a(3)),c=a(928),l=Object(o.a)(n,r,[],!1,null,"323ee643",null);"function"==typeof c.default&&Object(c.default)(l),l.options.__file="src/views/release/list/index.vue";t.default=l.exports}}]);