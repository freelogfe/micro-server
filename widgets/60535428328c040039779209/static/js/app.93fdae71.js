(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["freelog-waterfall-app"]=t():e["freelog-waterfall-app"]=t()})(window,(function(){return function(e){function t(t){for(var o,a,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp_freelog-waterfall"]=window["webpackJsonp_freelog-waterfall"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;return i.push([0,"chunk-vendors"]),n()}({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2395:function(e,t,n){},"304d":function(e,t,n){"use strict";n("77db")},4721:function(e,t,n){},5362:function(e,t,n){"use strict";n("6b6e")},"56d7":function(e,t,n){"use strict";n.r(t),n.d(t,"bootstrap",(function(){return J})),n.d(t,"mount",(function(){return q})),n.d(t,"unmount",(function(){return z}));var o=n("1da1"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("b0c0"),n("2b0e")),i=n("9483");Object(i["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var a=n("8c4f"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"freelog-video-player"},[n("div",{staticClass:"freelog-video-player__container"},[e._l(e.videos,(function(t,o){return n("VideoCard",{key:o,attrs:{title:t.title,description:"戚薇征服年下男金瀚",sources:t.sources,showPlay:o===e.activeIndex,disabledPrev:0===o,disabledNext:o===e.videos.length-1},on:{play:function(t){e.activeIndex=o},stop:function(t){e.activeIndex=-1},prev:function(t){e.activeIndex--},next:function(t){e.activeIndex++}}})})),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}}),n("div",{staticStyle:{width:"268px"}})],2)])])},c=[],u=(n("d81d"),n("d3b7"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-card"},[n("a",{style:"background-image: url("+e.cover+")",on:{click:function(t){return e.$emit("play")},mouseenter:e.mouseover,mouseleave:e.mouseout}},[n("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",width:"100%",height:"100%"}},[n("video",{ref:"refVideo",style:e.videoWidthHeight,attrs:{loop:"",muted:""},domProps:{muted:!0}},e._l(e.sources,(function(e,t){return n("source",{key:t,attrs:{src:e.src,type:e.type}})})),0)]),n("div",{staticClass:"video-card__footer"},[n("div",[n("div",{staticClass:"video-card__title"},[e._v(e._s(e.title))]),n("div",{staticClass:"video-card__description"},[e._v(e._s(e.description))])]),n("div",{staticClass:"video-card__play"},[e._v("立即观看")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPlay,expression:"showPlay"}],staticClass:"video-wrap"},[n("a",{staticClass:"prev-next",class:{disabled:e.disabledPrev},on:{click:e.prevVideo}},[e._v("<")]),n("div",{staticClass:"video-box"},[n("div",{staticClass:"video-title"},[n("span",[e._v(e._s(e.title))]),n("a",{on:{click:function(t){return e.$emit("stop")}}},[e._v("×")])]),n("div",{staticClass:"video-player"},[n("VideoPlayer",{attrs:{options:e.videoOptions,play:e.showPlay}})],1)]),n("a",{staticClass:"prev-next",class:{disabled:e.disabledNext},on:{click:e.nextVideo}},[e._v(">")])])])}),l=[],d=(n("a4d3"),n("e01a"),n("99af"),n("4d90"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{ref:"videoPlayer",staticClass:"video-js",attrs:{loop:""}})}),p=[],f=n("f0e2"),v={name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}},play:Boolean},data:function(){return{player:null}},mounted:function(){this.player=Object(f["a"])(this.$refs.videoPlayer,this.options,(function(){}))},methods:{},beforeDestroy:function(){this.player&&this.player.dispose()},watch:{play:function(e){e?this.player.play():this.player.pause()}}},h=v,y=(n("304d"),n("2877")),m=Object(y["a"])(h,d,p,!1,null,null,null),w=m.exports,g={name:"VideoCard",components:{VideoPlayer:w},props:{title:String,cover:{type:String,default:""},sources:Array,showPlay:{type:Boolean,default:!1},disabledPrev:{type:Boolean,default:!1},disabledNext:{type:Boolean,default:!1}},data:function(){return{videoOptions:{autoplay:!1,controls:!0,sources:this.sources},dataURL:"",videoWidthHeight:{},description:""}},mounted:function(){var e=this,t=this.$refs.refVideo;t.addEventListener("loadeddata",(function(){e.description=b(1e3*t.duration),e.videoWidthHeight={width:260/365<t.videoWidth/t.videoHeight?"auto":"100%",height:260/365>=t.videoWidth/t.videoHeight?"auto":"100%"}}))},methods:{mouseover:function(){var e=this.$refs.refVideo;e.paused&&e.play()},mouseout:function(){var e=this.$refs.refVideo;e.paused||e.pause()},prevVideo:function(){this.disabledPrev||this.$emit("prev")},nextVideo:function(){this.disabledNext||this.$emit("next")}}};function b(e){var t=Math.floor(e),n=Math.floor(t/36e5);t%=36e5;var o=Math.floor(t/6e4);t%=6e4;var r=Math.floor(t/1e3);return t%=1e3,"".concat(String(n).padStart(2,"0")," : ").concat(String(o).padStart(2,"0")," : ").concat(String(r).padStart(2,"0"),".").concat(String(t).padStart(3,"0"))}var _=g,x=(n("77fc"),Object(y["a"])(_,u,l,!1,null,"0e0367a3",null)),S=x.exports,O={name:"home-page",components:{VideoCard:S},data:function(){return{videos:[],activeIndex:-1}},mounted:function(){this.handleData()},methods:{handleData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:P().then((function(t){console.log(t,"$$$$$$"),e.videos=t.dataList.map((function(e){return{controls:!0,title:e.title,sources:[{src:e.src,type:"video/mp4"}]}}))}));case 1:case"end":return t.stop()}}),t)})))()}}};function P(){return new Promise((function(e){var t={resourceType:"video"};window.freelogApp.getPresentables(t).then((function(t){var n=[];t.data.data.dataList.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.freelogApp.getFileStreamById(t.presentableId,!0);case 2:o=e.sent,n.push({title:t.presentableName,src:o});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e({dataList:n,done:!0})}))}))}var j=O,C=(n("5362"),Object(y["a"])(j,s,c,!1,null,"0f22a5c8",null)),k=C.exports;r["a"].use(a["a"]);var $=[{path:"/",name:"Home",component:k}],E=new a["a"]({mode:"history",base:"/",routes:$}),R=E,V=n("2f62");r["a"].use(V["a"]);var B=new V["a"].Store({state:{},mutations:{},actions:{},modules:{}}),I=n("caf9"),L=n("4eb5"),N=n.n(L),M=(n("83f4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),G=[],H=(n("7c55"),{}),T=Object(y["a"])(H,M,G,!1,null,null,null),A=T.exports;r["a"].config.productionTip=!1,n("6e25"),r["a"].use(I["a"]),r["a"].use(N.a),r["a"].config.productionTip=!1;var W=null;function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container;W=new r["a"]({router:R,store:B,render:function(e){return e(A)}}).$mount(t?t.querySelector("#app"):"#app")}function F(e){e.onGlobalStateChange&&e.onGlobalStateChange((function(t,n){return console.log("[onGlobalStateChange - ".concat(e.name,"]:"),t,n)}),!0),e.setGlobalState&&e.setGlobalState({ignore:e.name,user:{name:e.name}})}function J(){return Y.apply(this,arguments)}function Y(){return Y=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("[vue] vue app bootstraped");case 1:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function q(e){return U.apply(this,arguments)}function U(){return U=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("[vue] props from main framework",t),F(t),D(t);case 3:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function z(){return K.apply(this,arguments)}function K(){return K=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:W.$destroy(),W.$el.innerHTML="",W=null,router=null;case 4:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}window.__POWERED_BY_FREELOG__||D()},"6b6e":function(e,t,n){},"77db":function(e,t,n){},"77fc":function(e,t,n){"use strict";n("4721")},"7c55":function(e,t,n){"use strict";n("2395")},"83f4":function(e,t,n){window.__POWERED_BY_FREELOG__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_FREELOG__)}})}));
//# sourceMappingURL=app.93fdae71.js.map